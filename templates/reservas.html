{% extends 'base.html' %}

{% block title %}Reservas - The Hotelaria{% endblock %}

{% block content %}

<div class="content-card">

    <div class="head d-flex justify-content-between align-items-center mb-3">
        <h2 class="titulo-pagina">Gerenciamento de Reservas</h2>
        <a href="{{ url_for('index') }}" class="btn-voltar">Voltar</a>
    </div>

    <form method="POST" action="{{ url_for('reservas') }}" class="filtro-box">
        <label for="checkin_filter">Filtrar por Data de Check-in:</label>
        <input type="date" id="checkin_filter" name="checkin_filter" value="{{ checkin_filter }}">

        <label for="ordem">Ordenar por check-in:</label>
        <select name="ordem" id="ordem">
            <option value="asc" {% if ordem == 'asc' %}selected{% endif %}>Crescente</option>
            <option value="desc" {% if ordem == 'desc' %}selected{% endif %}>Decrescente</option>
        </select>

        <button type="submit" class="btn-filtrar">Aplicar Filtro</button>
    </form>

    <div class="text-center">
        <a href="{{ url_for('add_reserva') }}" class="btn-add">Adicionar Reserva</a>
        <a href="{{ url_for('relatorios') }}" class="btn-add">Relatórios Avançados</a>
    </div>

    <h3 class="mt-4 titulo-tabela">Reservas Encontradas</h3>

    <div class="table-responsive mt-3">
        <table class="custom-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Hóspede</th>
                    <th>Quarto</th>
                    <th>Check-In</th>
                    <th>Check-Out</th>
                    <th>Valor Total</th>
                    <th>Ações</th>
                </tr>
            </thead>

            <tbody>
                {% if reservas %}
                    {% for reserva in reservas %}
                    <tr>
                        <td>{{ reserva[0] }}</td>
                        <td>{{ reserva[1] }}</td>
                        <td>{{ reserva[2] }}</td>
                        <td>{{ reserva[3] }}</td>
                        <td>{{ reserva[4] }}</td>
                        <td>{{ reserva[5] }}</td>
                        <td>
                            <form method="POST" action="{{ url_for('excluir_reserva', id=reserva[0]) }}"
                                  onsubmit="return confirm('Tem certeza que deseja excluir esta reserva?');">
                                <button class="btn-excluir">Excluir</button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="7" class="text-center">Nenhuma reserva encontrada.</td>
                    </tr>
                {% endif %}
            </tbody>

        </table>
    </div>

</div>

{% endblock %}
